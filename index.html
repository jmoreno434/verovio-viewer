<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>OSMD: MusicXML â†’ SVG (carga local)</title>
  <!-- OSMD desde jsDelivr -->
  <script src="https://cdn.jsdelivr.net/npm/opensheetmusicdisplay@1.9.0/build/opensheetmusicdisplay.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    #sheet { border: 1px solid #ccc; padding: 1rem; margin-top: 1rem; }
  </style>
</head>
<body>

  <h1>Renderiza tu MusicXML</h1>
  <input type="file" id="fileInput" accept=".xml,.musicxml" />
  <div id="sheet"></div>

  <script>
    // 1) Instancia OSMD apuntando al contenedor
    const osmd = new opensheetmusicdisplay.OpenSheetMusicDisplay(
      document.getElementById("sheet")
    );

    // 2) Cuando el usuario seleccione un archivo...
    document.getElementById("fileInput").addEventListener("change", e => {
      const file = e.target.files[0];
      if (!file) return;

      // 3) Leer como ArrayBuffer
      const reader = new FileReader();
      reader.onload = () => {
        const arrayBuffer = reader.result;
        // 4) Cargar y renderizar
        osmd.load(arrayBuffer)
          .then(() => osmd.render())
          .catch(err => console.error("Error renderizando:", err));
      };
      reader.readAsArrayBuffer(file);
    });
  </script>

</body>
</html>

